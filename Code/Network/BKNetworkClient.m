//
//  BKClient.m
//  BaseKit
//
//  Created by Bruno Wernimont on 26/12/11.
//  Copyright (c) 2011 __MyCompanyName__. All rights reserved.
//

#import "BKNetworkClient.h"

static BKNetworkClient *_networkclient = nil;


////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
@implementation BKNetworkClient


////////////////////////////////////////////////////////////////////////////////////////////////////
+ (id )sharedClient {
    return _networkclient;
}


////////////////////////////////////////////////////////////////////////////////////////////////////
+ (void)setSharedClient:(id)client {
    if (_networkclient != nil) {
        [_networkclient release];
    }
    
    _networkclient = [client retain];
}


////////////////////////////////////////////////////////////////////////////////////////////////////
+ (id)clientWithBaseURL:(NSString *)URL {
    id client = [[self alloc] initWithBaseURL:[NSURL URLWithString:URL]];
    
    return [client autorelease];
}


////////////////////////////////////////////////////////////////////////////////////////////////////
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    
    if (self) {
        // Set default network client if no one set
        if ([BKNetworkClient sharedClient] == nil) {
            [BKNetworkClient setSharedClient:self];
        }
    }
    
    return self;
}

@end
